<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
	<title>Qry</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />


<style type="text/css">

body{
	background-color:rgb(238,231,209);
	background-image:url('img/bg.png');
	background-repeat:repeat-x;
	height: 100%;
}

table{
	width:100%;
	text-align: center; 
	font-family: Verdana; 
	font-weight: normal; 
	font-size: 15px;
	color: #404040;
	background-color: #fafafa;
	border: 1px #6699CC solid;
	border-collapse: collapse;
	border-spacing: 0px;
}
table th{
	border-bottom: 2px solid #6699CC; 
	border-left: 1px solid #6699CC;
	background-color: #79A8D1;
	text-align: center;
	text-indent: 5px;
	font-family: Verdana;
	font-weight: bold;
	font-size: 1em;
	color: #404040;
}
table tr{
	border-bottom: 1px solid #9CF;
	padding: 2px 5px;
	border-top: 1px;
	border-left: 1px solid #9CF;
	border-right: 0px;
	text-align: left; 
	text-indent: 10px;
	font-family: Verdana, sans-serif, Arial;
	font-weight: normal;
	font-size: 1em;
	color: #404040;
	background-color: #fafafa;
}
table tr .selected {
	background-color: #BEC8D1;
}
#title{
	text-align: center;
	font-family: sans-serif;
	color: #404040;
}

#runs {
	float: left; 
	width:39%; 
}

#details {
	float: right; 
	width: 59%;
	height: 100%;
	border: 2px solid;
	border-color: #79A8D1;
	border-radius: 10px;
	padding: 5px;
	background-color: #fafafa;
}

.detailsHeader {
	float: clear;
	font-size: 1.5em;
	font-weight: bold;
	color: #404040;
	margin-bottom: 5px;
	background-color: #79A8D1;
	margin: -7px -7px 7px -7px;
	padding: 5px;
	border-top-left-radius: 10px;
	border-top-right-radius: 10px;
}

.mapHeader {
	font-size: 1.0em;
	font-weight: bold;
	color: #47627a;
}
.mapHolder {
	height:50%;
	clear: both;
	margin-bottom:10px;
}

.optRow, .paramRow, .resultRow {
	color: #404040;
}
.optKey, .paramKey, .resultKey {
	font-weight: bold;
}
.optValue, .paramValue, .resultValue {
	word-break: break-all;
}

#showOptions, #showParams, #showAll {
	text-decoration: none;
	color: #7a5f47;
}
#showOptions:hover, #showParams:hover, #showAll:hover {
	text-decoration: none;
	color: #d1a279;
}


#cmdHolder {
	position:fixed; 
	bottom:0px; 
	left: 0px;
	right: 0px;
	background-color:black;
	color: white;
	padding: 3px;
	font-size: 1em;
	margin: 5px;
	border-radius: 7px;
	opacity:0.9;
}

#cmdPrefix {
	font-weight: bold;
	vertical-align: middle;
}

#cmd {
	border: 0px solid;
	background-color:transparent;
	color: white;
	width: 90%;
	font-size: 1em;
	text-align: left;
	vertical-align: middle;
}
#cmd:focus {
	outline:none;
}

</style>

<script src="js/jquery-1.4.3.min.js" type="text/javascript"></script>
<script src="js/logic.js" type="text/javascript"></script>
</head>

<body>
	<h1 id="title">Result Viewer</h1>
	
	<div id="runs">
	<table id="tableRun">
		<thead>
		<tr>
			<th>RID</th>
			<th>Name</th>
			<th>Start Time</th>
			<th>End Time</th>
		</tr>
		</thead>
		<?r Run.reverse_order(:rid).each_with_index do |r,i| ?>
		<tr onclick="select(#{i});">
			<td>#{ h(r.rid) }</td>
			<td>#{ h(r.name) }</td>
			<td>#{ Time.now.year == r.start.year ? r.start.strftime("%I:%M %p on %a, %b %d") : r.start.strftime("%I:%M %p on %a (%b %d %Y)") }</td>
			<!--Finished Time-->
			#{r.completed ? '<td>' : '<td style="background-color:#FFBFBF;">'}#{ 
				if not r.completed then 
					''
				else 
					Time.now.year == r.stop.year ? r.stop.strftime("%I:%M %p (%b %d)") : r.stop.strftime("%I:%M %p on %a (%b %d %Y)") 
				end }</td>
		</tr>
		<?r end ?>
	</table>
	</div>

	<div id="details">
		<!--Header-->
		<div id="runInfo" class="detailsHeader">
			<span id="fillRID">[rid]</span>:
			<span id="fillName" style="font-style:italic;">please wait...</span>
		</div>
		<!--Results-->
		<div class="mapHeader" style="float:left;">
			Results
		</div>
		<div id="results" class="mapHolder">
			<table id="fillResults">
			</table>
		</div>
		<!--Option Switch-->
		<div class="mapHeader" style="float:left;">
			Input Parameters
		</div>
		<div style="float:right;">
			<a href="" id="showOptions">Options</a> 
			| 
			<a href="" id="showParams">Parameters</a>
			|
			<a href="" id="showAll">All</a>
		</div>
		<!--Input-->
		<div id="detailsInput" class="mapHolder">
		</div>
		<!--(options target)-->
		<div id="detailsInputOptions" style="display:none;">
			<table id="fillOptions">
			</table>
		</div>
		<!--(params target)-->
		<div id="detailsInputParams" style="display:none;">
			<table id="fillParams">
			</table>
		</div>
	</div>

<div id="cmdHolder" style="display:none;">
	<span id="cmdPrefix">:</span>
	<input id="cmd" type="text"/>
</div>


</body>
</html>
